<!DOCTYPE html>
<html lang="en" xmlns:tb="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://unpkg.com/htmx.org@1.8.6"></script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
ì œëª© :
<div th:text="${post.getTitle()}"></div>
ìœ ì € ì•„ì´ë”” :
<div th:text="${post.getUser().getUserId()}"></div>
ì‹œê°„ :
<div th:text="${post.getTime()}"></div>
ê²Œì‹œê¸€ì˜ ì¢…ë¥˜:
<div th:text="${post.getPostCategory().getName()}"></div>
ì´ë¯¸ì§€ :
<img th:src="${post.getImagePath()}">
ë‚´ìš© :
<div th:text="${post.getContent()}"></div>

<a th:href="@{/post/delete(postId=${post.getId()})}">ì‚­ì œ</a>
<a th:href="@{/post/update(postId=${post.getId()})}">ìˆ˜ì •</a>
=========================================
ê²Œì‹œê¸€ ë¦¬ë·°
<a th:href="@{/post/read(reviewLink=true,postId=${post.getId()})}">ë¦¬ë·° ì‘ì„±</a>
<div th:if="${reviewLink}">
    <form th:action="@{/post/review/add}" method="post" enctype="multipart/form-data">
        ì œëª©<input type="text" name="title">
        ë‚´ìš©<input type="text" name="content">
        ì´ë¯¸ì§€<input type="file" name="file" accept="image/*">
        <input type="hidden" name="kinds" value="PostReview">
        <input type="hidden" name="kindsId" th:value="${post.getId()}">
        <input type="submit" value="ì‘ì„±">
    </form>
</div>
<div th:each="reviewList:${postReviewList}">
    ì œëª© :
    <div th:text="${reviewList.getTitle()}"></div>
    ìœ ì € ì•„ì´ë””:
    <div th:text="${reviewList.getUser().getUserId()}"></div>
    ì‹œê°„:
    <div th:text="${reviewList.getTime()}"></div>
    ì´ë¯¸ì§€:
    <img th:src="${reviewList.getImagePath()}">
    ë‚´ìš©:
    <div th:text="${reviewList.getContent()}"></div>

    <!--    id result ê°’ì´ "Best" ì¼ë•Œ-->
    <div th:each="recommend:${recommendList}">
        <div th:if="${reviewList.getId()==recommend.getBaseReview().getId()}">
            <div th:if="${recommend.getRecommend().equals('Best')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                    <input type="submit" value="ğŸ‘" style="background-color: blue">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="WOREST">
                    <input type="submit" value="ğŸ‘">
                </form>
            </div>
            <!--id result ê°’ì´ "Worst" ì¼ë•Œ-->
            <div th:if="${recommend.getRecommend().equals('Worst')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="BEST">
                    <input type="submit" value="ğŸ‘">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                    <input type="submit" value="ğŸ‘" style="background-color: red">
                </form>
            </div>
            <!--    id result ê°’ì´ "Cancel" ì¼ë•Œ-->
            <div th:if="${recommend.getRecommend().equals('Cancel')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="BEST">
                    <input type="submit" value="ğŸ‘">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="WORST">
                    <input type="submit" value="ğŸ‘">
                </form>
            </div>
        </div>
        <!--ì—¬ê¸°ë¶€ë¶„!!!-->
        <div id="recommendForm">
            <form th:action="@{/review/recommend}" method="post" style="display: none;">
                <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                <input type="hidden" name="trueOrFalse" th:value="BEST">
                <input type="submit" value="ğŸ‘">
            </form>
            <form th:action="@{/review/recommend}" method="post" style="display: none;">
                <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                <input type="submit" value="ğŸ‘">
            </form>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            // DOMì´ ì¤€ë¹„ë˜ë©´ ì‹¤í–‰
            $(document).ready(function() {
                // ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì—¬ì§€ëŠ” ë¶€ë¶„
                $('#recommendForm').show();
                $('#oppositeForm').show();

                // ì¡°ê±´ì— ë”°ë¼ ìˆ¨ê¹€/ë³´ì„ ì²˜ë¦¬
                if (${recommend.getRecommend().equals('Best')}) {
                    $('#oppositeForm').hide();
                } else if (${recommend.getRecommend().equals('Worst')}) {
                    $('#recommendForm').hide();
                } else if (${recommend.getRecommend().equals('Cancel')}) {
                    // ì·¨ì†Œì¸ ê²½ìš° ë‘ form ëª¨ë‘ ìˆ¨ê¹€
                    $('#recommendForm').hide();
                    $('#oppositeForm').hide();
                }
            });
        </script>

    </div>


    <a th:href="@{/post/review/delete(baseReviewId=${reviewList.getId()},postId=${post.getId()})}">ì‚­ì œ</a>
    <a th:href="@{/post/review/update(baseReviewId=${reviewList.getId()})}">ìˆ˜ì •</a>
</div>
</body>
</html>